{"id":"auto-commentary-0yr","title":"Typography polish: line spacing, column gaps, consistent punctuation","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T16:59:02.117471-06:00","updated_at":"2026-01-09T16:59:02.117471-06:00"}
{"id":"auto-commentary-3v7","title":"Use document title in header instead of generic Commentary","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T16:59:01.84366-06:00","updated_at":"2026-01-09T16:59:01.84366-06:00"}
{"id":"auto-commentary-98t","title":"Fix Whitaker's Words headword construction for non-verbs","description":"## Problem\n\nWhitaker's Words returns morphological **stems**, not dictionary headwords. The lexicon code correctly handles verbs by adding conjugation endings, but for nouns, adjectives, and pronouns it just uses the raw stem.\n\n**Affected code**: `autocom/languages/latin/lexicon.py` lines 981-994\n\n```python\n# Build headword from first root\nif roots and len(roots) \u003e 0:\n    stem = roots[0]\n    if wt_name == \"V\" and conj is not None:\n        ending = self.CONJUGATION_ENDING_MAP.get(conj, \"o\")\n        result[\"headword\"] = f\"{stem}{ending}\"\n    else:\n        result[\"headword\"] = stem  # BUG: Uses raw stem for non-verbs\\!\n```\n\n## Examples\n\n| Word | Stem returned | Should be | Type |\n|------|---------------|-----------|------|\n| multum | `mult` | multus | adj 1st/2nd decl |\n| ille | `ill` | ille | pronoun |\n| Italiam | `itali` | Italia | noun 1st decl F |\n| arma | `arm` | arma | noun 2nd decl N plural tantum |\n| terra | `terr` | terra | noun 1st decl F |\n| saevae | `saev` | saevus | adj 1st/2nd decl |\n| primum | `prim` | primus | adj 1st/2nd decl |\n\n## Whitaker's Data Structure\n\n```python\n# wordType: N, ADJ, PRON, V, ADV, etc.\n# category: [declension, variant] for nouns/adj; [conjugation, variant] for verbs\n# form: [gender, number_type] for nouns; ['X'] for some adj; ['ADJECT'] for pronouns\n# form number codes: S=singular, P=plural, T=pluralia tantum, L=local name\n```\n\n## Solution Approach\n\nCreate ending maps similar to CONJUGATION_ENDING_MAP:\n\n1. **NOUN_NOM_ENDING_MAP**: Map (declension, gender, is_plural_tantum) -\u003e nominative ending\n2. **ADJ_NOM_ENDING_MAP**: Map (declension) -\u003e masculine nominative ending (dictionary form)\n3. **PRON_HEADWORD_MAP**: Special cases for pronouns (ille, hic, is, qui, etc.)\n\n## Test Cases Needed\n\n- 1st decl feminine nouns: terra, Italia, via\n- 2nd decl masculine nouns: dominus, animus\n- 2nd decl neuter nouns: bellum, consilium\n- 2nd decl pluralia tantum: arma, castra\n- 1st/2nd decl adjectives: multus, saevus, primus, bonus\n- 3rd decl adjectives: omnis, brevis\n- Pronouns: ille, hic, is, qui, quis","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-11T10:04:22.678509-06:00","updated_at":"2026-01-11T10:04:38.840806-06:00","dependencies":[{"issue_id":"auto-commentary-98t","depends_on_id":"auto-commentary-fq9","type":"blocks","created_at":"2026-01-11T10:05:52.100957-06:00","created_by":"daemon"},{"issue_id":"auto-commentary-98t","depends_on_id":"auto-commentary-nmj","type":"blocks","created_at":"2026-01-11T10:05:52.262314-06:00","created_by":"daemon"},{"issue_id":"auto-commentary-98t","depends_on_id":"auto-commentary-c0y","type":"blocks","created_at":"2026-01-11T10:05:52.429198-06:00","created_by":"daemon"}]}
{"id":"auto-commentary-c0y","title":"Add pronoun headword special cases","description":"## Task\n\nPronouns need special handling because they don't follow regular declension patterns. Create a mapping from stem to dictionary headword.\n\n## Mapping Logic\n\n```python\n# stem -\u003e dictionary headword for common pronouns\nPRON_HEADWORD_MAP = {\n    'ill': 'ille',        # ille, illa, illud\n    'hic': 'hic',         # hic, haec, hoc (stem varies: h-)\n    'h': 'hic',           # alternate stem\n    'is': 'is',           # is, ea, id\n    'e': 'is',            # alternate stem for ea\n    'qui': 'qui',         # qui, quae, quod\n    'qu': 'qui',          # alternate stem\n    'quis': 'quis',       # quis, quid\n    'ips': 'ipse',        # ipse, ipsa, ipsum\n    'idem': 'idem',       # idem, eadem, idem\n    'eid': 'idem',        # alternate stem\n    'nos': 'nos',         # personal pronouns\n    'vos': 'vos',\n    'ego': 'ego',\n    'tu': 'tu',\n    'su': 'sui',          # reflexive\n    'ali': 'alius',       # alius, alia, aliud\n    'alt': 'alter',       # alter, altera, alterum\n    'uter': 'uter',       # uter, utra, utrum\n    'neuter': 'neuter',   # neuter, neutra, neutrum\n    'null': 'nullus',     # nullus, nulla, nullum\n    'tot': 'totus',       # totus, tota, totum\n    'sol': 'solus',       # solus, sola, solum (pronominal adj)\n}\n```\n\n## Implementation\n\nIn `_lookup_whitaker_with_metadata`:\n\n```python\nif wt_name == 'PRON':\n    stem_lower = stem.lower()\n    if stem_lower in PRON_HEADWORD_MAP:\n        result['headword'] = PRON_HEADWORD_MAP[stem_lower]\n    else:\n        # Fallback: try adding common pronoun endings\n        result['headword'] = stem  # May need more logic\n```\n\n## Test Cases\n\n- ill -\u003e ille\n- h/hic -\u003e hic\n- qui/qu -\u003e qui\n- ips -\u003e ipse\n- ego -\u003e ego","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T10:05:15.658938-06:00","updated_at":"2026-01-11T10:05:15.658938-06:00"}
{"id":"auto-commentary-fq9","title":"Add noun nominative ending reconstruction","description":"## Task\n\nAdd NOUN_NOM_ENDING_MAP to reconstruct nominative singular headwords for nouns from Whitaker's stems.\n\n## Mapping Logic\n\n```python\n# (declension, gender, is_plural_tantum) -\u003e nominative ending\nNOUN_NOM_ENDING_MAP = {\n    # 1st declension\n    (1, 'F', False): 'a',      # terra, via, Italia\n    (1, 'M', False): 'a',      # poeta, nauta (masc 1st decl)\n    \n    # 2nd declension\n    (2, 'M', False): 'us',     # dominus, animus\n    (2, 'N', False): 'um',     # bellum, consilium\n    (2, 'N', True): 'a',       # arma, castra (pluralia tantum)\n    (2, 'M', True): 'i',       # liberi (pluralia tantum)\n    \n    # 3rd declension - complex, may need stem inspection\n    (3, 'M', False): '',       # varies: rex, homo, miles\n    (3, 'F', False): '',       # varies: pax, urbs, lex\n    (3, 'N', False): '',       # varies: corpus, nomen, iter\n    \n    # 4th declension\n    (4, 'M', False): 'us',     # eventus, exercitus\n    (4, 'N', False): 'u',      # cornu, genu\n    \n    # 5th declension\n    (5, 'F', False): 'es',     # res, dies\n}\n```\n\n## Implementation\n\nIn `_lookup_whitaker_with_metadata`, after extracting roots/category/form:\n\n```python\nif wt_name == 'N':\n    decl = category[0] if category else None\n    gender = form_info[0] if form_info else None\n    is_plural = form_info[1] in ('P', 'T') if len(form_info) \u003e 1 else False\n    key = (decl, gender, is_plural)\n    ending = NOUN_NOM_ENDING_MAP.get(key, '')\n    result['headword'] = f'{stem}{ending}'\n```\n\n## Test Cases\n\n- terr + a = terra (1st F)\n- arm + a = arma (2nd N plural tantum)\n- domin + us = dominus (2nd M)\n- bell + um = bellum (2nd N)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T10:04:52.503037-06:00","updated_at":"2026-01-11T10:04:52.503037-06:00"}
{"id":"auto-commentary-fwp","title":"Line numbers in left margin instead of inline with text","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T16:59:00.998836-06:00","updated_at":"2026-01-09T16:59:00.998836-06:00"}
{"id":"auto-commentary-g4a","title":"Exclude words with no definition from glossary and write them to an errors output file for review","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T17:00:01.119795-06:00","updated_at":"2026-01-11T09:50:04.007835-06:00","closed_at":"2026-01-11T09:50:04.007835-06:00","close_reason":"Closed"}
{"id":"auto-commentary-n18","title":"Fix glossary entry format to match Steadman style (headword with ending, e.g. voco, -are)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T16:59:01.55466-06:00","updated_at":"2026-01-09T16:59:01.55466-06:00"}
{"id":"auto-commentary-nmj","title":"Add adjective nominative ending reconstruction","description":"## Task\n\nAdd ADJ_NOM_ENDING_MAP to reconstruct nominative singular masculine headwords for adjectives from Whitaker's stems.\n\n## Mapping Logic\n\nLatin dictionary convention: adjectives use masculine nominative singular as headword.\n\n```python\n# declension -\u003e masculine nominative ending\nADJ_NOM_ENDING_MAP = {\n    1: 'us',      # 1st/2nd decl: multus, bonus, saevus, primus\n    2: 'us',      # Same as 1: some coded as 2\n    3: 'is',      # 3rd decl two-termination: omnis, brevis, fortis\n    # Note: 3rd decl one/three termination need special handling\n}\n\n# Special 3rd declension patterns (check if stem ends in certain patterns)\nADJ_3RD_DECL_SPECIAL = {\n    # One-termination: stem IS the headword (felix, audax, vetus)\n    # Three-termination: -er/-ris/-re pattern (acer, acris, acre)\n}\n```\n\n## Implementation\n\nIn `_lookup_whitaker_with_metadata`:\n\n```python\nif wt_name == 'ADJ':\n    decl = category[0] if category else None\n    ending = ADJ_NOM_ENDING_MAP.get(decl, 'us')  # Default to -us\n    result['headword'] = f'{stem}{ending}'\n```\n\n## Test Cases\n\n- saev + us = saevus (1st/2nd decl)\n- mult + us = multus (1st/2nd decl)\n- prim + us = primus (1st/2nd decl)\n- omn + is = omnis (3rd decl two-term)\n- felix (one-term: stem = headword)\n- acer (three-term: needs -er ending)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T10:05:04.007718-06:00","updated_at":"2026-01-11T10:05:04.007718-06:00"}
{"id":"auto-commentary-th9","title":"Show first-occurrence line number in glossary instead of frequency count","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T16:59:01.272811-06:00","updated_at":"2026-01-09T16:59:01.272811-06:00"}
{"id":"auto-commentary-ucm","title":"In the latin commentary, it appears that the ending of words in the dictionary section are missing for example on page 1 we have ag instead of ago (Im referencing commentary.pdf","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T16:42:00.809808-06:00","updated_at":"2026-01-09T16:51:33.614971-06:00","closed_at":"2026-01-09T16:51:33.614971-06:00","close_reason":"Fixed verb headword construction in lexicon.py. Added CONJUGATION_ENDING_MAP to properly append 1st person singular endings to verb stems (ag- → ago, fac- → facio)."}
{"id":"auto-commentary-vj9","title":"Implement persistent caching for dictionary lookups (Whitaker's + APIs) using existing SQLite cache infrastructure","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T17:04:24.679732-06:00","updated_at":"2026-01-11T09:32:14.799749-06:00","closed_at":"2026-01-11T09:32:14.799749-06:00","close_reason":"Implemented persistent SQLite-based dictionary cache for Whitaker's Words and API lookups. Benchmarks show 7.5x speedup for cached lookups with 90% hit rate for repeated words. Added 22 tests covering cache operations, statistics, expiration, and persistence."}
